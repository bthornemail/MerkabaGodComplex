<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULP Visual Knowledge Graph Interface</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin: 10px 0;
        }
        .visualization-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .tab-button {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .tab-button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        .tab-button.active {
            background: rgba(255,255,255,0.3);
            border-color: #ffd700;
        }
        .visualization-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 30px;
        }
        #graph-container {
            width: 100%;
            height: 600px;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .control-group {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .control-group h3 {
            margin: 0 0 10px 0;
            font-size: 1em;
        }
        .control-button {
            padding: 8px 16px;
            margin: 5px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s ease;
        }
        .control-button:hover {
            background: rgba(255,255,255,0.3);
        }
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
            text-align: center;
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.5);
        }
        .info-text {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåå Universal Life Protocol</h1>
            <h2>Visual Knowledge Graph Interface</h2>
            <p>Interactive exploration of living knowledge, quantum states, and attention token flows</p>
        </div>
        
        <div class="visualization-tabs">
            <button class="tab-button active" onclick="switchVisualization('d3-force')">
                üåä D3 Force Network
            </button>
            <button class="tab-button" onclick="switchVisualization('cytoscape')">
                üîó Cytoscape Graph
            </button>
            <button class="tab-button" onclick="switchVisualization('3d-network')">
                üåç 3D Network
            </button>
        </div>
        
        <div class="visualization-container">
            <div id="graph-container"></div>
            
            <div class="controls">
                <div class="control-group">
                    <h3>üéØ Focus</h3>
                    <button class="control-button" onclick="focusNodeType('knowledge_unit')">Knowledge</button>
                    <button class="control-button" onclick="focusNodeType('quantum_state')">Quantum</button>
                    <button class="control-button" onclick="focusNodeType('attention_token')">Tokens</button>
                    <button class="control-button" onclick="showAll()">Show All</button>
                </div>
                
                <div class="control-group">
                    <h3>üé® Layout</h3>
                    <button class="control-button" onclick="changeLayout('force')">Force</button>
                    <button class="control-button" onclick="changeLayout('circular')">Circular</button>
                    <button class="control-button" onclick="changeLayout('grid')">Grid</button>
                </div>
                
                <div class="control-group">
                    <h3>‚ö° Effects</h3>
                    <button class="control-button" onclick="toggleAnimations()">Animation</button>
                    <button class="control-button" onclick="toggleLabels()">Labels</button>
                    <button class="control-button" onclick="togglePhysics()">Physics</button>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #4a90e2;"></div>
                    <span>Knowledge Units</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #9400d3;"></div>
                    <span>Quantum States</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffd700;"></div>
                    <span>Attention Tokens</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff00ff; border-radius: 0;"></div>
                    <span>Quantum Entanglement</span>
                </div>
            </div>
        </div>
        
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="node-count">--</div>
                <div>Total Nodes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="edge-count">--</div>
                <div>Connections</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="cluster-count">--</div>
                <div>Clusters</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="quantum-coherence">--</div>
                <div>Quantum Coherence</div>
            </div>
        </div>
        
        <div class="info-text">
            <h3>üß† About This Visualization</h3>
            <p>This interactive interface demonstrates the Universal Life Protocol's advanced knowledge graph system. 
            The visualization shows living knowledge units that evolve over time, quantum states that can exist in 
            superposition and become entangled, and attention tokens that flow through the network to allocate 
            computational resources.</p>
            
            <h4>üéÆ How to Interact:</h4>
            <ul>
                <li><strong>Drag</strong> nodes to explore connections</li>
                <li><strong>Zoom</strong> with mouse wheel to see details</li>
                <li><strong>Click</strong> nodes to see information</li>
                <li><strong>Use controls</strong> above to filter and adjust the view</li>
            </ul>
        </div>
    </div>

    <script>
        let currentVisualization = 'd3-force';
        let graphData = null;
        let d3Simulation = null;
        let cytoscapeInstance = null;
        
        // Load graph data
        async function loadGraphData() {
            try {
                // In a real implementation, this would load the generated JSON files
                // For demo purposes, we'll create sample data
                graphData = generateSampleData();
                initializeVisualization();
                updateStats();
            } catch (error) {
                console.error('Error loading graph data:', error);
            }
        }
        
        function generateSampleData() {
            const nodes = [];
            const edges = [];
            
            // Knowledge nodes
            for (let i = 0; i < 10; i++) {
                nodes.push({
                    id: `knowledge_${i}`,
                    label: `Knowledge ${i + 1}`,
                    type: 'knowledge_unit',
                    size: 15 + Math.random() * 10,
                    color: '#4a90e2',
                    x: Math.random() * 400 - 200,
                    y: Math.random() * 400 - 200
                });
            }
            
            // Quantum nodes
            for (let i = 0; i < 6; i++) {
                nodes.push({
                    id: `quantum_${i}`,
                    label: `Quantum ${i + 1}`,
                    type: 'quantum_state',
                    size: 12 + Math.random() * 8,
                    color: '#9400d3',
                    x: Math.random() * 400 - 200,
                    y: Math.random() * 400 - 200
                });
            }
            
            // Token nodes
            for (let i = 0; i < 8; i++) {
                nodes.push({
                    id: `token_${i}`,
                    label: `${(Math.random() * 5 + 1).toFixed(1)} ATN`,
                    type: 'attention_token',
                    size: 10 + Math.random() * 6,
                    color: '#ffd700',
                    x: Math.random() * 400 - 200,
                    y: Math.random() * 400 - 200
                });
            }
            
            // Generate edges
            for (let i = 0; i < 30; i++) {
                const source = nodes[Math.floor(Math.random() * nodes.length)];
                const target = nodes[Math.floor(Math.random() * nodes.length)];
                
                if (source.id !== target.id) {
                    edges.push({
                        source: source.id,
                        target: target.id,
                        type: Math.random() > 0.7 ? 'quantum_entanglement' : 'semantic_relation',
                        color: Math.random() > 0.7 ? '#ff00ff' : '#cccccc',
                        width: 1 + Math.random() * 2
                    });
                }
            }
            
            return { nodes, links: edges };
        }
        
        function initializeVisualization() {
            if (currentVisualization === 'd3-force') {
                initializeD3Force();
            } else if (currentVisualization === 'cytoscape') {
                initializeCytoscape();
            }
        }
        
        function initializeD3Force() {
            const container = d3.select('#graph-container');
            container.selectAll('*').remove();
            
            const svg = container.append('svg')
                .attr('width', '100%')
                .attr('height', '100%');
            
            const width = 800;
            const height = 600;
            
            d3Simulation = d3.forceSimulation(graphData.nodes)
                .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(80))
                .force('charge', d3.forceManyBody().strength(-300))
                .force('center', d3.forceCenter(width / 2, height / 2));
            
            const link = svg.selectAll('.link')
                .data(graphData.links)
                .enter().append('line')
                .attr('class', 'link')
                .attr('stroke', d => d.color)
                .attr('stroke-width', d => d.width)
                .attr('opacity', 0.6);
            
            const node = svg.selectAll('.node')
                .data(graphData.nodes)
                .enter().append('circle')
                .attr('class', 'node')
                .attr('r', d => d.size)
                .attr('fill', d => d.color)
                .attr('opacity', 0.8)
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            const label = svg.selectAll('.label')
                .data(graphData.nodes)
                .enter().append('text')
                .attr('class', 'label')
                .text(d => d.label)
                .attr('font-size', '10px')
                .attr('fill', 'white')
                .attr('text-anchor', 'middle');
            
            d3Simulation.on('tick', () => {
                link.attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node.attr('cx', d => d.x)
                    .attr('cy', d => d.y);
                
                label.attr('x', d => d.x)
                     .attr('y', d => d.y + 4);
            });
            
            function dragstarted(event, d) {
                if (!event.active) d3Simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) d3Simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }
        
        function updateStats() {
            document.getElementById('node-count').textContent = graphData.nodes.length;
            document.getElementById('edge-count').textContent = graphData.links.length;
            document.getElementById('cluster-count').textContent = '3';
            document.getElementById('quantum-coherence').textContent = '0.75';
        }
        
        function switchVisualization(type) {
            currentVisualization = type;
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            initializeVisualization();
        }
        
        function focusNodeType(type) {
            // Implementation for focusing on specific node types
            console.log('Focusing on:', type);
        }
        
        function showAll() {
            console.log('Showing all nodes');
        }
        
        function changeLayout(layout) {
            console.log('Changing layout to:', layout);
        }
        
        function toggleAnimations() {
            console.log('Toggling animations');
        }
        
        function toggleLabels() {
            console.log('Toggling labels');
        }
        
        function togglePhysics() {
            console.log('Toggling physics');
        }
        
        // Initialize when page loads
        window.addEventListener('load', loadGraphData);
    </script>
</body>
</html>