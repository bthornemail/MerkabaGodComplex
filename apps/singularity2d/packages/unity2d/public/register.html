<!DOCTYPE html>
<html>

<head>
    <!-- <script src="https://cdn.jsdelivr.net/npm/ethers@6.12.1/+esm"></script> -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <main class="container">
        <section id="register-section">
            <div class="card">
                <form id="submit-request-form" class=" form" style="padding:1rem;"
                    action="/set/identitiy">
                    <h2>Register Contact Method</h2>
                    <div class="container" style="display: flex;align-items: center;justify-content: center;">
                        <!-- <input id="url" type="text"> -->
                        <div id="qrcode"></div>
                    </div>
                    <input name="title" class="form-control form-control-sm" value="registered-contact" hidden />
                    <input name="summary" class="form-control form-control-sm" value="Contact Registration  " hidden />
                    <input name="description" class="form-control form-control-sm" hidden />
                    <div class="mb-3">
                        <label for="name" class="form-label" required>Name</label>
                        <input type="text" class="form-control form-control-sm" name="name" placeholder="Enter Name">
                    </div>
                    <label for="address" class="form-label">Address</label>
                    <div class="mb-3 input-group">
                        <select name="contact-method" class="form-select  form-control-sm" aria-label="Default select example">
                            <option value="qrcode" selected>Contact Method</option>
                            <option value="email">E-mail</option>
                            <option value="sms">Text</option>
                            <option value="mqtt">Broadcast</option>
                        </select>
                        <input type="text" class="form-control" name="address" placeholder="Enter Contact Address">
                    </div>
                    <button id="submit-request-form-submit-button" name="submit-request-form-submit-button"
                        class="btn btn-primary">Register</button>
                </form>
            </div>
        </section>
        <section id="sender-section">
            <div class="card">
                <h2 class="card-title">Sender</h2>
                <div id="senderQRCode"></div>
                <button class="btn btn-primary" id="senderQRCode-button">Change</button>
                <div style="width:100%">
                    <div id="sender-reader"></div>
                </div>
                <!-- <hr />
            <div class="input-group">
                <input class="form-control" type="file" id="senderFileInput">
                <button class="btn btn-success" id="senderFileButton">Upload</button>
            </div> -->
            </div>
        </section>
        <section id="recipient-section">
            <div class="card">
                <h2>Recipient</h2>
                <div id="recipientQRCode"></div>
                <div style="width:100%">
                    <div id="recipient-reader"></div>
                </div>
                <hr />
                <div class="input-group">
                    <input class="form-control" type="file" id="reciepientFileInput">
                    <button class="btn btn-success" id="reciepientFileButton">Upload</button>
                </div>
            </div>
        </section>
        <section id="message-section">
            <div class="card">
                <h2>Message Data</h2>
                <div>
                    <!-- <div id="data-loading">No Message</div> -->
                    <p id="message" class="form-control" rows="10">No Message</p>
                </div>
                <div class="input-group">
                    <input class="form-control" type="file" id="fileInput">
                    <button class="btn btn-primary" id="upload-data-button">Upload</button>
                </div>
            </div>
            <div class="card">
                <h2>Message Review</h2>
                <div>
                    <textarea id="data" class="form-control" rows="10">Nothing to Encrypt/Decrypt</textarea>
                </div>
                <div class="button-group">
                    <button class="btn btn-danger" id="encrypt-button">Encrypt</button>
                    <button class="btn btn-success" id="decrypt-button">Decrypt</button>
                </div>
            </div>
            <div class="card">
                <dialog id="message-data">
                    <button class="btn btn-sm btn-danger" id="message-data-button"
                        onclick="document.querySelector('#message-data').close()">Close</button>
                    <textarea name="content-text" id="content-text" cols="20" rows="10"></textarea>
                </dialog>
                <div class="button-group m-1">
                    <button class="badge text-bg-primary" id="message-data-button"
                        onclick="document.querySelector('#message-data').showModal()">Message</button>
                    <button class="badge text-bg-secondary" id="content-data-button">Content</button>
                    <button class="badge text-bg-danger" id="asset-data-button">Asset</button>
                    <button class="badge text-bg-warning" id="service-data-button">Service</button>
                    <button class="badge text-bg-success" id="knowledge-data-button">Knowledge</button>
                </div>
            </div>
            <div class="card">
                <h2>Hash and Sign</h2>
                <div>
                    <div id="data-loading">No Qr Code </div>
                    <a id="message-hash-signature-qr-code-link" href="#message-hash-signature-qr-code">
                        <div id="message-hash-signature-qr-code"></div>
                    </a>
                </div>
                <button class="btn btn-primary" id="encrypt-data-button">Create</button>
            </div>
        </section>
        <section id="post-section">
            <form id="post-order-form" class=" form" style="padding:1rem;" action="#post-order-form">
                <div class="card">
                    <h2>Post Data</h2>
                    <label for="address" class="form-label">Select Host</label>
                    <div class="input-group">
                        <select name="known-host-select" class="form-select" aria-label="Default select example">
                            <option value="" selected>Known Host</option>
                            <option value="http://127.0.0.1:3000/upload">localhost</option>
                            <option value="http://marketplace2d.com:3000/upload">marketplace2d.com</option>
                            <option value="http://life2d.com:3000/upload">life2d.com</option>
                        </select>
                    </div>
                    <sub>Host Qr Code</sub>
                    <div id="host-qrcode"></div>
                    <div style="width:100%">
                        <div id="host-reader"></div>
                    </div>
                    <hr />
                    <div class="input-group">
                        <input class="form-control" type="file" id="reciepientFileInput">
                        <button class="btn btn-success" id="reciepientFileButton">Upload</button>
                    </div>
                    <input name="title" class="form-control" value="Host" hidden />
                    <input name="summary" class="form-control" value="Host Data Post" hidden />
                    <input name="description" class="form-control" hidden />
                    <button id="submit-request-form-submit-button" name="post-order-form-submit-button"
                        class="btn btn-primary">Post</button>
                </div>
            </form>
        </section>
    </main>
    <div>
        <button class="btn btn-sm btn-outline-danger">Reset</butt>
    </div>
    <footer id="footer" class="footer">
        <div class="card"
            style="display: grid;grid-template-columns: repeat(3,1fr);padding: 1rem;gap: .25rem;font-size: small;">
            <a href="http://127.0.0.1:8002">Chat2D</a>
            <a href="http://127.0.0.1:8003">Ledger2D</a>
            <a href="http://127.0.0.1:8004">Unity2D</a>
            <a href="http://127.0.0.1:8005">Life2D</a>
            <a href="http://127.0.0.1:8006">Marketplace2D</a>
            <a href="http://127.0.0.1:8007">Knowledge2D</a>
        </div>
    </footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/interface-datastore/dist/index.min.js"></script>
<script src="https://unpkg.com/datastore-idb/dist/index.min.js"></script>
<script src="./modules/html5-qrcode/html5-qrcode.min.js" type="text/javascript"></script>
<script src='./modules/qrcode/qrcode.js'></script>
<script>

    // const registerSection = document.querySelector("#register-section")
    // const senderSection = document.querySelector("#sender-section")
    // const recipientSection = document.querySelector("#recipient-section")
    // const messageSection = document.querySelector("#message-section")
    // const contextSection = document.querySelector("#context-section")
    // const postSection = document.querySelector("#post-section")
    // // registerSection.setAttribute("hidden", "hidden");
    // senderSection.setAttribute("hidden", "hidden");
    // recipientSection.setAttribute("hidden", "hidden");
    // messageSection.setAttribute("hidden", "hidden");
    // postSection.setAttribute("hidden", "hidden");
    // document.addEventListener("DOMContentLoaded", (event) => {
    //     new URL(location).search.includes("client") ?? registerSection.setAttribute("hidden", "hidden")
    //     new URL(location).search.includes("sender") ?? senderSection.setAttribute("hidden", "hidden")
    //     new URL(location).search.includes("recipient") ?? registerSection.setAttribute("hidden", "hidden")
    //     new URL(location).search.includes("message") ?? messageSection.setAttribute("hidden", "hidden")
    //     new URL(location).search.includes("message") ?? postSection.removeAttribute("hidden")

    //     // document.querySelectorAll("section").forEach((section) => {
    //     //     // if (section.id === registerSection.id) return;
    //     //     // if (section.id === senderSection.id) return;
    //     //     // if (section.id === messageSection.id) return;
    //     //     // if (section.id === contextSection.id) return;
    //     //     if (section.id === postSection.id) return;
    //     //     section.setAttribute("hidden", "hidden")
    //     // })
    // });
</script>
<script type="module" src="./index.js"></script>
</html>