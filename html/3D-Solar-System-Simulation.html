<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Solar System Simulation</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Inter', sans-serif; background-color: #0d0d1a; color: white; }
        canvas { display: block; }
        .controls-panel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 12px;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .controls-panel button {
            background-color: #4a4a6e;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .controls-panel button:hover {
            background-color: #6a6a8e;
        }
    </style>
    <!-- Font for a cleaner look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Load es-module-shims to enable importmaps -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // Set up the scene, camera, and renderer
        let scene, camera, renderer, controls;
        let planets = [];

        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a1a); // Dark background

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 20;

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // Controls
            // This now correctly references the imported OrbitControls class
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; // Give it a more fluid feel
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.maxDistance = 100;

            // Lights
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5); // Soft ambient light
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xffffff, 1.5);
            pointLight.position.set(0, 0, 0); // Position at the center
            scene.add(pointLight);

            // Create the sun
            const sunGeometry = new THREE.SphereGeometry(2, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffcc00 }); // Bright yellow/orange
            const sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            // Create planets and their orbits
            // Each planet object will have its mesh, speed, and distance from the sun.
            const planetData = [
                { name: 'Mercury', distance: 3.5, size: 0.3, color: 0x9a9a9a, speed: 0.04 },
                { name: 'Venus', distance: 5.5, size: 0.5, color: 0xcc9933, speed: 0.03 },
                { name: 'Earth', distance: 8, size: 0.6, color: 0x0066ff, speed: 0.02 },
                { name: 'Mars', distance: 11, size: 0.4, color: 0xff3300, speed: 0.015 },
                { name: 'Jupiter', distance: 18, size: 1.5, color: 0xcc9966, speed: 0.01 },
                { name: 'Saturn', distance: 25, size: 1.2, color: 0xe6d8b9, speed: 0.008 },
                { name: 'Uranus', distance: 30, size: 0.9, color: 0x66ccff, speed: 0.006 },
                { name: 'Neptune', distance: 35, size: 0.9, color: 0x3366ff, speed: 0.005 }
            ];

            planetData.forEach(data => {
                const geometry = new THREE.SphereGeometry(data.size, 16, 16);
                const material = new THREE.MeshStandardMaterial({ color: data.color });
                const mesh = new THREE.Mesh(geometry, material);
                
                // Set initial position
                mesh.position.x = data.distance;

                // Create a pivot object to represent the orbit
                const orbitPivot = new THREE.Object3D();
                orbitPivot.add(mesh);
                scene.add(orbitPivot);

                // Add to the planets array for the animation loop
                planets.push({
                    mesh: mesh,
                    pivot: orbitPivot,
                    distance: data.distance,
                    speed: data.speed,
                });
            });

            // Handle window resizing
            window.addEventListener('resize', onWindowResize, false);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            // Update planet positions to simulate orbits
            planets.forEach(planet => {
                planet.pivot.rotation.y += planet.speed;
            });

            // Update controls
            controls.update();

            renderer.render(scene, camera);
        }

        // Start the simulation when the window loads
        window.onload = function() {
            init();
            animate();
        };

    </script>
</body>
</html>
